# 相关背景

> 关键字：tree-shaking webpack babel transform-runtime

现代化的业务前端项目里现在主流的是在用webpack做构建，但是由于webpack4之前官方文档的不完善，加上相关技术栈的多样，导致webpack配置一直是前端界的一块难啃的鸡肋。

* 项目融资已经到位，就差一名首席Webpack 配置工程师了

今天记录一下一次webpack中babel配置的经历和总结，背景如下

1. 有一个webpack构建的项目
2. 使用babel做JS代码转译
3. 项目中有混用ESModule，CommonJSModule的行为
4. 想开启webpack的tree-shaking

## 技术分析

### 为什么要tree-shaking？

一是可以减少代码体积，二是为了方便定位问题

### tree-shaking的原理是什么？

在webpack中，基于ES2015 模块（也叫做 **harmony** 模块）的静态分析能力，也就是说通过静态语法分析，就能找到模块之前的依赖点，进而找出不需要的依赖，在构建阶段就删除不需要的依赖

> 中文文档：[https://webpack.docschina.org/guides/tree-shaking/](https://webpack.docschina.org/guides/tree-shaking/)

### webpack中如何启用tree-shaking？

* webpack默认会进行tree-shaking分析，但是不会删除无用代码
* 使用uglifyJS等webpack插件会删掉 被webpack标记为 **unused harmony export**的代码

### tree-shaking和babel有什么关系？
